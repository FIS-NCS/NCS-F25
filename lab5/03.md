# Software Composition Analysis (SCA)

SCA involves identifying all components (including open-source/proprietary direct/transitive dependencies) used to build a digital product. Components can be extracted from:

- Dependency manifests (e.g., `requirements.txt`, `package.json`, `go.mod`)
- Compressed images/artifacts, a running container, or a `Dockerfile`
- IaC files (e.g., Terraform or CloudFormation manifests)

A Software Bill of Materials (SBOM) is typically generated as JSON, XML, CSV, or a special format like SPDX.

## Practice

1. Install [Syft](https://github.com/anchore/syft) and [Grype](https://github.com/anchore/grype)

    ```bash
    curl -sSfL https://raw.githubusercontent.com/anchore/syft/main/install.sh \
    | sudo sh -s -- -b /usr/local/bin

    curl -sSfL https://raw.githubusercontent.com/anchore/grype/main/install.sh \
    | sudo sh -s -- -b /usr/local/bin
    ```

1. Use Syft to generate SBOM from DVWA image (vulnerable PHP web app)

    ```bash
    syft vulnerables/web-dvwa -o json=sbom.json -o text=syft_report.txt
    ```

1. Use Grype to analyze the generated SBOM for vulnerabilities

    ```bash
    grype sbom:./sbom.json -o table > grype_report.txt
    ```

## Exercise 3

> Goal: include dependency scanning with [Trivy](https://trivy.dev/docs/) in your CI/CD pipeline

1. Clone [juice-shop](https://github.com/juice-shop/juice-shop): vulnerable JavaScript application.

1. Remove `.git` directory and re-push the code to a **GitHub** repository under your account.

1. Configure Trivy in to run in GitHub Actions, generate SBOM for the application, and scan it for vulnerabilities. Produce and show HTML report as a pipeline artifact.

1. Test the CI, verify it runs on every push to the main branch. Provide proof of the successful run of the pipeline under your account.

